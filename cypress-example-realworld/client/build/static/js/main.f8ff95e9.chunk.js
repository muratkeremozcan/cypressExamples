(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"A",function(){return r}),a.d(t,"h",function(){return c}),a.d(t,"F",function(){return o}),a.d(t,"m",function(){return s}),a.d(t,"E",function(){return l}),a.d(t,"r",function(){return i}),a.d(t,"s",function(){return u}),a.d(t,"f",function(){return m}),a.d(t,"g",function(){return p}),a.d(t,"a",function(){return d}),a.d(t,"n",function(){return f}),a.d(t,"e",function(){return g}),a.d(t,"i",function(){return h}),a.d(t,"G",function(){return E}),a.d(t,"c",function(){return v}),a.d(t,"l",function(){return b}),a.d(t,"y",function(){return y}),a.d(t,"z",function(){return N}),a.d(t,"t",function(){return O}),a.d(t,"v",function(){return j}),a.d(t,"B",function(){return k}),a.d(t,"u",function(){return C}),a.d(t,"C",function(){return U}),a.d(t,"k",function(){return w}),a.d(t,"j",function(){return A}),a.d(t,"o",function(){return T}),a.d(t,"p",function(){return L}),a.d(t,"b",function(){return P}),a.d(t,"D",function(){return D}),a.d(t,"I",function(){return S}),a.d(t,"J",function(){return I}),a.d(t,"q",function(){return _}),a.d(t,"H",function(){return R}),a.d(t,"x",function(){return x}),a.d(t,"w",function(){return F});var n="APP_LOAD",r="REDIRECT",c="ARTICLE_SUBMITTED",o="SETTINGS_SAVED",s="DELETE_ARTICLE",l="SETTINGS_PAGE_UNLOADED",i="HOME_PAGE_LOADED",u="HOME_PAGE_UNLOADED",m="ARTICLE_PAGE_LOADED",p="ARTICLE_PAGE_UNLOADED",d="ADD_COMMENT",f="DELETE_COMMENT",g="ARTICLE_FAVORITED",h="ARTICLE_UNFAVORITED",E="SET_PAGE",v="APPLY_TAG_FILTER",b="CHANGE_TAB",y="PROFILE_PAGE_LOADED",N="PROFILE_PAGE_UNLOADED",O="LOGIN",j="LOGOUT",k="REGISTER",C="LOGIN_PAGE_UNLOADED",U="REGISTER_PAGE_UNLOADED",w="ASYNC_START",A="ASYNC_END",T="EDITOR_PAGE_LOADED",L="EDITOR_PAGE_UNLOADED",P="ADD_TAG",D="REMOVE_TAG",S="UPDATE_FIELD_AUTH",I="UPDATE_FIELD_EDITOR",_="FOLLOW_USER",R="UNFOLLOW_USER",x="PROFILE_FAVORITES_PAGE_UNLOADED",F="PROFILE_FAVORITES_PAGE_LOADED"},22:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(59),o=a(4),s=a(5),l=a(1),i=Object(s.b)(function(){return{}},function(e){return{favorite:function(t){return e({type:l.e,payload:o.a.Articles.favorite(t)})},unfavorite:function(t){return e({type:l.i,payload:o.a.Articles.unfavorite(t)})}}})(function(e){var t=e.article,a=t.favorited?"btn btn-sm btn-primary":"btn btn-sm btn-outline-primary";return r.a.createElement("div",{className:"article-preview"},r.a.createElement("div",{className:"article-meta"},r.a.createElement(c.a,{to:"/@".concat(t.author.username)},r.a.createElement("img",{src:t.author.image,alt:t.author.username})),r.a.createElement("div",{className:"info"},r.a.createElement(c.a,{className:"author",to:"/@".concat(t.author.username)},t.author.username),r.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),r.a.createElement("div",{className:"pull-xs-right"},r.a.createElement("button",{"data-cy":"fav-article",className:a,onClick:function(a){a.preventDefault(),t.favorited?e.unfavorite(t.slug):e.favorite(t.slug)}},r.a.createElement("i",{className:"ion-heart"})," ",t.favoritesCount))),r.a.createElement(c.a,{to:"/article/".concat(t.slug),className:"preview-link"},r.a.createElement("h1",null,t.title),r.a.createElement("p",null,t.description),r.a.createElement("span",null,"Read more..."),r.a.createElement("ul",{className:"tag-list"},t.tagList.map(function(e){return r.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)}))))}),u=Object(s.b)(function(){return{}},function(e){return{onSetPage:function(t,a){return e({type:l.G,page:t,payload:a})}}})(function(e){if(e.articlesCount<=10)return null;for(var t=[],a=0;a<Math.ceil(e.articlesCount/10);++a)t.push(a);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},t.map(function(t){var a=t===e.currentPage;return r.a.createElement("li",{className:a?"page-item active":"page-item",onClick:function(a){var n;a.preventDefault(),n=t,e.pager?e.onSetPage(n,e.pager(n)):e.onSetPage(n,o.a.Articles.all(n))},key:t.toString()},r.a.createElement("a",{className:"page-link",href:"","data-cy":"page-link"},t+1))})))});t.a=function(e){return e.articles?0===e.articles.length?r.a.createElement("div",{className:"article-preview"},"No articles are here... yet."):r.a.createElement("div",null,e.articles.map(function(e){return r.a.createElement(i,{article:e,key:e.slug})}),r.a.createElement(u,{pager:e.pager,articlesCount:e.articlesCount,currentPage:e.currentPage})):r.a.createElement("div",{className:"article-preview-loading"},"Loading...")}},35:function(e,t,a){"use strict";(function(e){var n=a(6),r=a(7),c=a(9),o=a(8),s=a(10),l=a(3),i=a(36),u=a(37),m=a(0),p=a.n(m),d=a(38),f=a(4),g=a(5),h=a(1),E=e.Promise,v=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.token?"feed":"all",t=this.props.token?f.a.Articles.feed:f.a.Articles.all;this.props.onLoad(e,t,E.all([f.a.Tags.getAll(),t()]))}},{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"render",value:function(){return p.a.createElement("div",{className:"home-page"},p.a.createElement(i.a,{token:this.props.token,appName:this.props.appName}),p.a.createElement("div",{className:"container page"},p.a.createElement("div",{className:"row"},p.a.createElement(u.a,null),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("div",{className:"sidebar"},p.a.createElement("p",null,"Popular Tags"),p.a.createElement(d.a,{tags:this.props.tags,onClickTag:this.props.onClickTag}))))))}}]),t}(p.a.Component);t.a=Object(g.b)(function(e){return Object(l.a)({},e.home,{appName:e.common.appName,token:e.common.token})},function(e){return{onClickTag:function(t,a,n){return e({type:h.c,tag:t,pager:a,payload:n})},onLoad:function(t,a,n){return e({type:h.r,tab:t,pager:a,payload:n})},onUnload:function(){return e({type:h.s})}}})(v)}).call(this,a(18))},36:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.appName;return e.token?null:r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"logo-font"},t.toLowerCase()),r.a.createElement("p",null,"A place to share your knowledge.")))}},37:function(e,t,a){"use strict";var n=a(3),r=a(22),c=a(0),o=a.n(c),s=a(4),l=a(5),i=a(1),u=function(e){if(e.token){return o.a.createElement("li",{className:"nav-item","data-cy":"your-feed"},o.a.createElement("a",{href:"",className:"feed"===e.tab?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.onTabClick("feed",s.a.Articles.feed,s.a.Articles.feed())}},"Your Feed"))}return null},m=function(e){return o.a.createElement("li",{className:"nav-item","data-cy":"global-feed"},o.a.createElement("a",{href:"",className:"all"===e.tab?"nav-link active":"nav-link",onClick:function(t){t.preventDefault(),e.onTabClick("all",s.a.Articles.all,s.a.Articles.all())}},"Global Feed"))},p=function(e){return e.tag?o.a.createElement("li",{className:"nav-item","data-cy":"tag-feed"},o.a.createElement("a",{href:"",className:"nav-link active"},o.a.createElement("i",{className:"ion-pound"})," ",e.tag)):null};t.a=Object(l.b)(function(e){return Object(n.a)({},e.articleList,{tags:e.home.tags,token:e.common.token})},function(e){return{onTabClick:function(t,a,n){return e({type:i.l,tab:t,pager:a,payload:n})}}})(function(e){return o.a.createElement("div",{className:"col-md-9"},o.a.createElement("div",{className:"feed-toggle"},o.a.createElement("ul",{className:"nav nav-pills outline-active"},o.a.createElement(u,{token:e.token,tab:e.tab,onTabClick:e.onTabClick}),o.a.createElement(m,{tab:e.tab,onTabClick:e.onTabClick}),o.a.createElement(p,{tag:e.tag}))),o.a.createElement(r.a,{pager:e.pager,articles:e.articles,loading:e.loading,articlesCount:e.articlesCount,currentPage:e.currentPage}))})},38:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(4);t.a=function(e){var t=e.tags;return t?r.a.createElement("div",{className:"tag-list"},t.map(function(t){return r.a.createElement("a",{"data-cy":"tag",href:"",className:"tag-default tag-pill",key:t,onClick:function(a){a.preventDefault(),e.onClickTag(t,function(e){return c.a.Articles.byTag(t,e)},c.a.Articles.byTag(t))}},t)})):r.a.createElement("div",null,"Loading Tags...")}},4:function(e,t,a){"use strict";(function(e){var n=a(31),r=a.n(n),c=a(32),o=a.n(c),s=r()(o.a,e.Promise),l="http://localhost:3000/api",i=encodeURIComponent,u=function(e){return e.body},m=null,p=function(e){m&&e.set("authorization","Token ".concat(m))},d=function(e){return s.del("".concat(l).concat(e)).use(p).then(u)},f=function(e){return s.get("".concat(l).concat(e)).use(p).then(u)},g=function(e,t){return s.put("".concat(l).concat(e),t).use(p).then(u)},h=function(e,t){return s.post("".concat(l).concat(e),t).use(p).then(u)},E={current:function(){return f("/user")},login:function(e,t){return h("/users/login",{user:{email:e,password:t}})},register:function(e,t,a){return h("/users",{user:{username:e,email:t,password:a}})},save:function(e){return g("/user",{user:e})}},v={getAll:function(){return f("/tags")}},b=function(e,t){return"limit=".concat(e,"&offset=").concat(t?t*e:0)},y=function(e){return Object.assign({},e,{slug:void 0})},N={all:function(e){return f("/articles?".concat(b(10,e)))},byAuthor:function(e,t){return f("/articles?author=".concat(i(e),"&").concat(b(5,t)))},byTag:function(e,t){return f("/articles?tag=".concat(i(e),"&").concat(b(10,t)))},del:function(e){return d("/articles/".concat(e))},favorite:function(e){return h("/articles/".concat(e,"/favorite"))},favoritedBy:function(e,t){return f("/articles?favorited=".concat(i(e),"&").concat(b(5,t)))},feed:function(){return f("/articles/feed?limit=10&offset=0")},get:function(e){return f("/articles/".concat(e))},unfavorite:function(e){return d("/articles/".concat(e,"/favorite"))},update:function(e){return g("/articles/".concat(e.slug),{article:y(e)})},create:function(e){return h("/articles",{article:e})}},O={create:function(e,t){return h("/articles/".concat(e,"/comments"),{comment:t})},delete:function(e,t){return d("/articles/".concat(e,"/comments/").concat(t))},forArticle:function(e){return f("/articles/".concat(e,"/comments"))}},j={follow:function(e){return h("/profiles/".concat(e,"/follow"))},get:function(e){return f("/profiles/".concat(e))},unfollow:function(e){return d("/profiles/".concat(e,"/follow"))}};t.a={Articles:N,Auth:E,Comments:O,Profile:j,Tags:v,setToken:function(e){m=e}}}).call(this,a(18))},40:function(e,t,a){e.exports=a(57)},57:function(e,t,a){"use strict";a.r(t);var n=a(27),r=a.n(n),c=a(5),o=a(0),s=a.n(o),l=a(15),i=(a(49),a(30)),u=a(4),m=a(1),p=function(e){return function(t){return function(a){if((c=a.payload)&&"function"===typeof c.then){e.dispatch({type:m.k,subtype:a.type});var n=e.getState().viewChangeCounter,r=a.skipTracking;a.payload.then(function(t){var c=e.getState();(r||c.viewChangeCounter===n)&&(console.log("RESULT",t),a.payload=t,e.dispatch({type:m.j,promise:a.payload}),e.dispatch(a))},function(t){var c=e.getState();if(r||c.viewChangeCounter===n){if(console.log("ERROR",t),a.error=!0,a.payload=t.response.body,a.payload.errors.unauthorized)return e.dispatch({type:m.v}),void e.dispatch({type:m.d});a.skipTracking||e.dispatch({type:m.j,promise:a.payload}),e.dispatch(a)}})}else{var c;t(a)}}}},d=function(e){return function(e){return function(t){t.type===m.B||t.type===m.t?t.error||(window.localStorage.setItem("jwt",t.payload.user.token),u.a.setToken(t.payload.user.token)):t.type===m.v&&(window.localStorage.setItem("jwt",""),u.a.setToken(null)),e(t)}}};var f=a(3),g=a(16),h={appName:"Conduit",token:null,viewChangeCounter:0},E=a(17),v=Object(l.combineReducers)({article:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.f:return Object(f.a)({},e,{article:t.payload[0].article,comments:t.payload[1].comments});case m.g:return{};case m.a:return Object(f.a)({},e,{commentErrors:t.error?t.payload.errors:null,comments:t.error?null:(e.comments||[]).concat([t.payload.comment])});case m.n:var a=t.commentId;return Object(f.a)({},e,{comments:e.comments.filter(function(e){return e.id!==a})});default:return e}},articleList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.e:case m.i:return Object(f.a)({},e,{articles:e.articles.map(function(e){return e.slug===t.payload.article.slug?Object(f.a)({},e,{favorited:t.payload.article.favorited,favoritesCount:t.payload.article.favoritesCount}):e})});case m.G:return Object(f.a)({},e,{articles:t.payload.articles,articlesCount:t.payload.articlesCount,currentPage:t.page});case m.c:return Object(f.a)({},e,{pager:t.pager,articles:t.payload.articles,articlesCount:t.payload.articlesCount,tab:null,tag:t.tag,currentPage:0});case m.r:return Object(f.a)({},e,{pager:t.pager,tags:t.payload[0].tags,articles:t.payload[1].articles,articlesCount:t.payload[1].articlesCount,currentPage:0,tab:t.tab});case m.s:return{};case m.l:return Object(f.a)({},e,{pager:t.pager,articles:t.payload.articles,articlesCount:t.payload.articlesCount,tab:t.tab,currentPage:0,tag:null});case m.y:case m.w:return Object(f.a)({},e,{pager:t.pager,articles:t.payload[1].articles,articlesCount:t.payload[1].articlesCount,currentPage:0});case m.z:case m.x:return{};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.t:case m.B:return Object(f.a)({},e,{inProgress:!1,errors:t.error?t.payload.errors:null});case m.u:case m.C:return{};case m.k:if(t.subtype===m.t||t.subtype===m.B)return Object(f.a)({},e,{inProgress:!0});break;case m.I:return Object(f.a)({},e,Object(g.a)({},t.key,t.value));default:return e}return e},common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.d:return Object(f.a)({},e,{token:t.token||null,appLoaded:!0,currentUser:t.payload?t.payload.user:null});case m.A:return Object(f.a)({},e,{redirectTo:null});case m.v:return Object(f.a)({},e,{redirectTo:"/",token:null,currentUser:null});case m.h:var a="/article/".concat(t.payload.article.slug);return Object(f.a)({},e,{redirectTo:a});case m.F:return Object(f.a)({},e,{redirectTo:t.error?null:"/",currentUser:t.error?null:t.payload.user});case m.t:case m.B:return Object(f.a)({},e,{redirectTo:t.error?null:"/",token:t.error?null:t.payload.user.token,currentUser:t.error?null:t.payload.user});case m.m:return Object(f.a)({},e,{redirectTo:"/"});case m.g:case m.p:case m.s:case m.z:case m.x:case m.E:case m.u:case m.C:return Object(f.a)({},e,{viewChangeCounter:e.viewChangeCounter+1});default:return e}},editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.o:return Object(f.a)({},e,{articleSlug:t.payload?t.payload.article.slug:"",title:t.payload?t.payload.article.title:"",description:t.payload?t.payload.article.description:"",body:t.payload?t.payload.article.body:"",tagInput:"",tagList:t.payload?t.payload.article.tagList:[]});case m.p:return{};case m.h:return Object(f.a)({},e,{inProgress:null,errors:t.error?t.payload.errors:null});case m.k:if(t.subtype===m.h)return Object(f.a)({},e,{inProgress:!0});break;case m.b:return Object(f.a)({},e,{tagList:e.tagList.concat([e.tagInput]),tagInput:""});case m.D:return Object(f.a)({},e,{tagList:e.tagList.filter(function(e){return e!==t.tag})});case m.J:return Object(f.a)({},e,Object(g.a)({},t.key,t.value));default:return e}return e},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.r:return Object(f.a)({},e,{tags:t.payload[0].tags});case m.s:return{};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.y:return Object(f.a)({},t.payload[0].profile);case m.z:return{};case m.q:case m.H:return Object(f.a)({},t.payload.profile);default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.F:return Object(f.a)({},e,{inProgress:!1,errors:t.error?t.payload.errors:null});case m.E:return{};case m.k:return Object(f.a)({},e,{inProgress:!0});default:return e}},router:E.d}),b=a(21),y=Object(b.a)(),N=Object(E.c)(y),O=Object(l.createStore)(v,Object(i.composeWithDevTools)(Object(l.applyMiddleware)(N,p,d))),j=a(61),k=a(60),C=a(6),U=a(7),w=a(9),A=a(8),T=a(10),L=a(59),P=function(e){return e.currentUser?null:s.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},s.a.createElement("li",{className:"nav-item","data-cy":"home"},s.a.createElement(L.a,{to:"/",className:"nav-link"},"Home")),s.a.createElement("li",{className:"nav-item","data-cy":"sign-in"},s.a.createElement(L.a,{to:"/login",className:"nav-link"},"Sign in")),s.a.createElement("li",{className:"nav-item","data-cy":"sign-up"},s.a.createElement(L.a,{to:"/register",className:"nav-link"},"Sign up")))},D=function(e){return e.currentUser?s.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},s.a.createElement("li",{className:"nav-item","data-cy":"home"},s.a.createElement(L.a,{to:"/",className:"nav-link"},"Home")),s.a.createElement("li",{className:"nav-item","data-cy":"new-post"},s.a.createElement(L.a,{to:"/editor",className:"nav-link"},s.a.createElement("i",{className:"ion-compose"}),"\xa0New Post")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(L.a,{to:"/settings",className:"nav-link"},s.a.createElement("i",{className:"ion-gear-a"}),"\xa0Settings")),s.a.createElement("li",{className:"nav-item","data-cy":"profile"},s.a.createElement(L.a,{to:"/@".concat(e.currentUser.username),className:"nav-link"},s.a.createElement("img",{src:e.currentUser.image,className:"user-pic",alt:e.currentUser.username}),e.currentUser.username))):null},S=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",{className:"navbar navbar-light"},s.a.createElement("div",{className:"container"},s.a.createElement(L.a,{to:"/",className:"navbar-brand"},this.props.appName.toLowerCase()),s.a.createElement(P,{currentUser:this.props.currentUser}),s.a.createElement(D,{currentUser:this.props.currentUser})))}}]),t}(s.a.Component),I=Object(c.b)(function(){return{}},function(e){return{onClickDelete:function(t){return e({type:m.m,payload:t})}}})(function(e){var t=e.article;return e.canModify?s.a.createElement("span",null,s.a.createElement(L.a,{to:"/editor/".concat(t.slug),className:"btn btn-outline-secondary btn-sm","data-cy":"edit-article"},s.a.createElement("i",{className:"ion-edit"})," Edit Article"),s.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){e.onClickDelete(u.a.Articles.del(t.slug))},"data-cy":"delete-article"},s.a.createElement("i",{className:"ion-trash-a"})," Delete Article")):s.a.createElement("span",null)}),_=function(e){var t=e.article;return s.a.createElement("div",{className:"article-meta"},s.a.createElement(L.a,{to:"/@".concat(t.author.username)},s.a.createElement("img",{src:t.author.image,alt:t.author.username})),s.a.createElement("div",{className:"info"},s.a.createElement(L.a,{to:"/@".concat(t.author.username),className:"author"},t.author.username),s.a.createElement("span",{className:"date"},new Date(t.createdAt).toDateString())),s.a.createElement(I,{canModify:e.canModify,article:t}))},R=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(w.a)(this,Object(A.a)(t).call(this))).state={body:""},e.setBody=function(t){e.setState({body:t.target.value})},e.createComment=function(t){t.preventDefault();var a=u.a.Comments.create(e.props.slug,{body:e.state.body});e.setState({body:""}),e.props.onSubmit(a)},e}return Object(T.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"card comment-form",onSubmit:this.createComment},s.a.createElement("div",{className:"card-block"},s.a.createElement("textarea",{className:"form-control",placeholder:"Write a comment...","data-cy":"comment-text",value:this.state.body,onChange:this.setBody,rows:"3"})),s.a.createElement("div",{className:"card-footer"},s.a.createElement("img",{src:this.props.currentUser.image,className:"comment-author-img",alt:this.props.currentUser.username}),s.a.createElement("button",{className:"btn btn-sm btn-primary",type:"submit","data-cy":"post-comment"},"Post Comment")))}}]),t}(s.a.Component),x=Object(c.b)(function(){return{}},function(e){return{onSubmit:function(t){return e({type:m.a,payload:t})}}})(R),F=Object(c.b)(function(){return{}},function(e){return{onClick:function(t,a){return e({type:m.n,payload:t,commentId:a})}}})(function(e){return e.show?s.a.createElement("span",{className:"mod-options","data-cy":"delete-button"},s.a.createElement("i",{className:"ion-trash-a",onClick:function(){var t=u.a.Comments.delete(e.slug,e.commentId);e.onClick(t,e.commentId)}})):null}),G=function(e){var t=e.comment,a=e.currentUser&&e.currentUser.username===t.author.username;return s.a.createElement("div",{"data-cy":"comment",className:"card"},s.a.createElement("div",{className:"card-block"},s.a.createElement("p",{className:"card-text"},t.body)),s.a.createElement("div",{className:"card-footer"},s.a.createElement(L.a,{to:"/@".concat(t.author.username),className:"comment-author"},s.a.createElement("img",{src:t.author.image,className:"comment-author-img",alt:t.author.username})),"\xa0",s.a.createElement(L.a,{to:"/@".concat(t.author.username),className:"comment-author"},t.author.username),s.a.createElement("span",{className:"date-posted"},new Date(t.createdAt).toDateString()),s.a.createElement(F,{show:a,slug:e.slug,commentId:t.id})))},M=function(e){return s.a.createElement("div",null,e.comments.map(function(t){return s.a.createElement(G,{comment:t,currentUser:e.currentUser,slug:e.slug,key:t.id})}))},W=function(e){return e.currentUser?s.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},s.a.createElement("div",null,s.a.createElement("list-errors",{errors:e.errors}),s.a.createElement(x,{slug:e.slug,currentUser:e.currentUser})),s.a.createElement(M,{comments:e.comments,slug:e.slug,currentUser:e.currentUser})):s.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},s.a.createElement("p",null,s.a.createElement(L.a,{to:"/login"},"Sign in"),"\xa0or\xa0",s.a.createElement(L.a,{to:"/register"},"sign up"),"\xa0to add comments on this article."),s.a.createElement(M,{comments:e.comments,slug:e.slug,currentUser:e.currentUser}))},B=a(34),H=a.n(B),z=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad(Promise.all([u.a.Articles.get(this.props.match.params.id),u.a.Comments.forArticle(this.props.match.params.id)]))}},{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"render",value:function(){if(!this.props.article)return null;var e={__html:H()(this.props.article.body,{sanitize:!0})},t=this.props.currentUser&&this.props.currentUser.username===this.props.article.author.username;return s.a.createElement("div",{className:"article-page"},s.a.createElement("div",{className:"banner"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",null,this.props.article.title),s.a.createElement(_,{article:this.props.article,canModify:t}))),s.a.createElement("div",{className:"container page"},s.a.createElement("div",{className:"row article-content"},s.a.createElement("div",{className:"col-xs-12"},s.a.createElement("div",{dangerouslySetInnerHTML:e}),s.a.createElement("ul",{className:"tag-list"},this.props.article.tagList.map(function(e){return s.a.createElement("li",{className:"tag-default tag-pill tag-outline",key:e},e)})))),s.a.createElement("hr",null),s.a.createElement("div",{className:"article-actions"}),s.a.createElement("div",{className:"row"},s.a.createElement(W,{comments:this.props.comments||[],errors:this.props.commentErrors,slug:this.props.match.params.id,currentUser:this.props.currentUser}))))}}]),t}(s.a.Component),V=Object(c.b)(function(e){return Object(f.a)({},e.article,{currentUser:e.common.currentUser})},function(e){return{onLoad:function(t){return e({type:m.f,payload:t})},onUnload:function(){return e({type:m.g})}}})(z),J=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){var e=this.props.errors;return e?s.a.createElement("ul",{className:"error-messages"},Object.keys(e).map(function(t){return s.a.createElement("li",{key:t},t," ",e[t])})):null}}]),t}(s.a.Component),Y=function(e){function t(){var e;Object(C.a)(this,t);var a=function(t){return function(a){return e.props.onUpdateField(t,a.target.value)}};return(e=Object(w.a)(this,Object(A.a)(t).call(this))).changeTitle=a("title"),e.changeDescription=a("description"),e.changeBody=a("body"),e.changeTagInput=a("tagInput"),e.watchForEnter=function(t){13===t.keyCode&&(t.preventDefault(),e.props.onAddTag())},e.removeTagHandler=function(t){return function(){e.props.onRemoveTag(t)}},e.submitForm=function(t){t.preventDefault();var a={title:e.props.title,description:e.props.description,body:e.props.body,tagList:e.props.tagList},n={slug:e.props.articleSlug},r=e.props.articleSlug?u.a.Articles.update(Object.assign(a,n)):u.a.Articles.create(a);e.props.onSubmit(r)},e}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(this.props.match.params.slug!==e.match.params.slug){if(e.match.params.slug)return this.props.onUnload(),this.props.onLoad(u.a.Articles.get(this.props.match.params.slug));this.props.onLoad(null)}}},{key:"componentWillMount",value:function(){if(this.props.match.params.slug)return this.props.onLoad(u.a.Articles.get(this.props.match.params.slug));this.props.onLoad(null)}},{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"editor-page"},s.a.createElement("div",{className:"container page"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},s.a.createElement(J,{errors:this.props.errors}),s.a.createElement("form",null,s.a.createElement("fieldset",null,s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Article Title","data-cy":"title",value:this.props.title,onChange:this.changeTitle})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control",type:"text","data-cy":"about",placeholder:"What's this article about?",value:this.props.description,onChange:this.changeDescription})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("textarea",{className:"form-control",rows:"8","data-cy":"article",placeholder:"Write your article (in markdown)",value:this.props.body,onChange:this.changeBody})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control",type:"text","data-cy":"tags",placeholder:"Enter tags",value:this.props.tagInput,onChange:this.changeTagInput,onKeyUp:this.watchForEnter}),s.a.createElement("div",{className:"tag-list"},(this.props.tagList||[]).map(function(t){return s.a.createElement("span",{className:"tag-default tag-pill",key:t},s.a.createElement("i",{className:"ion-close-round","data-cy":"remove-tag",onClick:e.removeTagHandler(t)}),t)}))),s.a.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",type:"button","data-cy":"publish",disabled:this.props.inProgress,onClick:this.submitForm},"Publish Article")))))))}}]),t}(s.a.Component),q=Object(c.b)(function(e){return Object(f.a)({},e.editor)},function(e){return{onAddTag:function(){return e({type:m.b})},onLoad:function(t){return e({type:m.o,payload:t})},onRemoveTag:function(t){return e({type:m.D,tag:t})},onSubmit:function(t){return e({type:m.h,payload:t})},onUnload:function(t){return e({type:m.p})},onUpdateField:function(t,a){return e({type:m.J,key:t,value:a})}}})(Y),K=a(35),Q=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(w.a)(this,Object(A.a)(t).call(this))).changeEmail=function(t){return e.props.onChangeEmail(t.target.value)},e.changePassword=function(t){return e.props.onChangePassword(t.target.value)},e.submitForm=function(t,a){return function(n){n.preventDefault(),e.props.onSubmit(t,a)}},e}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"render",value:function(){var e=this.props.email,t=this.props.password;return s.a.createElement("div",{className:"auth-page"},s.a.createElement("div",{className:"container page"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},s.a.createElement("h1",{className:"text-xs-center"},"Sign In"),s.a.createElement("p",{className:"text-xs-center"},s.a.createElement(L.a,{to:"/register"},"Need an account?")),s.a.createElement(J,{errors:this.props.errors}),s.a.createElement("form",{onSubmit:this.submitForm(e,t)},s.a.createElement("fieldset",null,s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email",value:e,onChange:this.changeEmail})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password",value:t,onChange:this.changePassword})),s.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:this.props.inProgress},"Sign in")))))))}}]),t}(s.a.Component),X=Object(c.b)(function(e){return Object(f.a)({},e.auth)},function(e){return{onChangeEmail:function(t){return e({type:m.I,key:"email",value:t})},onChangePassword:function(t){return e({type:m.I,key:"password",value:t})},onSubmit:function(t,a){return e({type:m.t,payload:u.a.Auth.login(t,a)})},onUnload:function(){return e({type:m.u})}}})(Q),Z=a(22),$=function(e){return e.isUser?s.a.createElement(L.a,{to:"/settings","data-cy":"edit-profile-settings",className:"btn btn-sm btn-outline-secondary action-btn"},s.a.createElement("i",{className:"ion-gear-a"})," Edit Profile Settings"):null},ee=function(e){if(e.isUser)return null;var t="btn btn-sm action-btn";e.user.following?t+=" btn-secondary":t+=" btn-outline-secondary";return s.a.createElement("button",{"data-cy":"follow-unfollow-user",className:t,onClick:function(t){t.preventDefault(),e.user.following?e.unfollow(e.user.username):e.follow(e.user.username)}},s.a.createElement("i",{className:"ion-plus-round"}),"\xa0",e.user.following?"Unfollow":"Follow"," ",e.user.username)},te=function(e){return Object(f.a)({},e.articleList,{currentUser:e.common.currentUser,profile:e.profile})},ae=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillMount",value:function(){this.props.onLoad(Promise.all([u.a.Profile.get(this.props.match.params.username),u.a.Articles.byAuthor(this.props.match.params.username)]))}},{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"renderTabs",value:function(){return s.a.createElement("ul",{className:"nav nav-pills outline-active"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(L.a,{className:"nav-link active",to:"/@".concat(this.props.profile.username)},"My Articles")),s.a.createElement("li",{className:"nav-item","data-cy":"favorited-articles"},s.a.createElement(L.a,{className:"nav-link",to:"/@".concat(this.props.profile.username,"/favorites")},"Favorited Articles")))}},{key:"render",value:function(){var e=this.props.profile;if(!e)return null;var t=this.props.currentUser&&this.props.profile.username===this.props.currentUser.username;return s.a.createElement("div",{className:"profile-page"},s.a.createElement("div",{className:"user-info","data-cy":"user-info"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},s.a.createElement("img",{src:e.image,className:"user-img",alt:e.username}),s.a.createElement("h4",{"data-cy":"username"},e.username),s.a.createElement("p",{"data-cy":"bio"},e.bio),s.a.createElement($,{isUser:t}),s.a.createElement(ee,{isUser:t,user:e,follow:this.props.onFollow,unfollow:this.props.onUnfollow}))))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 col-md-10 offset-md-1"},s.a.createElement("div",{className:"articles-toggle"},this.renderTabs()),s.a.createElement(Z.a,{pager:this.props.pager,articles:this.props.articles,articlesCount:this.props.articlesCount,state:this.props.currentPage})))))}}]),t}(s.a.Component),ne=Object(c.b)(te,function(e){return{onFollow:function(t){return e({type:m.q,payload:u.a.Profile.follow(t)})},onLoad:function(t){return e({type:m.y,payload:t})},onUnfollow:function(t){return e({type:m.H,payload:u.a.Profile.unfollow(t)})},onUnload:function(){return e({type:m.z})}}})(ae),re=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.onLoad(function(t){return u.a.Articles.favoritedBy(e.props.match.params.username,t)},Promise.all([u.a.Profile.get(this.props.match.params.username),u.a.Articles.favoritedBy(this.props.match.params.username)]))}},{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"renderTabs",value:function(){return s.a.createElement("ul",{className:"nav nav-pills outline-active"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(L.a,{className:"nav-link",to:"/@".concat(this.props.profile.username)},"My Articles")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(L.a,{className:"nav-link active",to:"/@".concat(this.props.profile.username,"/favorites")},"Favorited Articles")))}}]),t}(ae),ce=Object(c.b)(te,function(e){return{onLoad:function(t,a){return e({type:m.y,pager:t,payload:a})},onUnload:function(){return e({type:m.z})}}})(re),oe=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(w.a)(this,Object(A.a)(t).call(this))).changeEmail=function(t){return e.props.onChangeEmail(t.target.value)},e.changePassword=function(t){return e.props.onChangePassword(t.target.value)},e.changeUsername=function(t){return e.props.onChangeUsername(t.target.value)},e.submitForm=function(t,a,n){return function(r){r.preventDefault(),e.props.onSubmit(t,a,n)}},e}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillUnmount",value:function(){this.props.onUnload()}},{key:"render",value:function(){var e=this.props.email,t=this.props.password,a=this.props.username;return s.a.createElement("div",{className:"auth-page"},s.a.createElement("div",{className:"container page"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},s.a.createElement("h1",{className:"text-xs-center"},"Sign Up"),s.a.createElement("p",{className:"text-xs-center"},s.a.createElement(L.a,{to:"/login"},"Have an account?")),s.a.createElement(J,{errors:this.props.errors}),s.a.createElement("form",{onSubmit:this.submitForm(a,e,t)},s.a.createElement("fieldset",null,s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Username","data-cy":"username",value:this.props.username,onChange:this.changeUsername})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:"Email","data-cy":"email",value:this.props.email,onChange:this.changeEmail})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:"Password","data-cy":"password",value:this.props.password,onChange:this.changePassword})),s.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:this.props.inProgress},"Sign up")))))))}}]),t}(s.a.Component),se=Object(c.b)(function(e){return Object(f.a)({},e.auth)},function(e){return{onChangeEmail:function(t){return e({type:m.I,key:"email",value:t})},onChangePassword:function(t){return e({type:m.I,key:"password",value:t})},onChangeUsername:function(t){return e({type:m.I,key:"username",value:t})},onSubmit:function(t,a,n){var r=u.a.Auth.register(t,a,n);e({type:m.B,payload:r})},onUnload:function(){return e({type:m.C})}}})(oe),le=function(e){function t(){var e;return Object(C.a)(this,t),(e=Object(w.a)(this,Object(A.a)(t).call(this))).state={image:"",username:"",bio:"",email:"",password:""},e.updateState=function(t){return function(a){var n=e.state,r=Object.assign({},n,Object(g.a)({},t,a.target.value));e.setState(r)}},e.submitForm=function(t){t.preventDefault();var a=Object.assign({},e.state);a.password||delete a.password,e.props.onSubmitForm(a)},e}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillMount",value:function(){this.props.currentUser&&Object.assign(this.state,{image:this.props.currentUser.image||"",username:this.props.currentUser.username,bio:this.props.currentUser.bio,email:this.props.currentUser.email})}},{key:"componentWillReceiveProps",value:function(e){e.currentUser&&this.setState(Object.assign({},this.state,{image:e.currentUser.image||"",username:e.currentUser.username,bio:e.currentUser.bio,email:e.currentUser.email}))}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.submitForm},s.a.createElement("fieldset",null,s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{"data-cy":"image-url",className:"form-control",type:"text",placeholder:"URL of profile picture",value:this.state.image,onChange:this.updateState("image")})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{"data-cy":"username",className:"form-control form-control-lg",type:"text",placeholder:"Username",value:this.state.username,onChange:this.updateState("username")})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("textarea",{className:"form-control form-control-lg",rows:"8","data-cy":"bio",placeholder:"Short bio about you",value:this.state.bio||"",onChange:this.updateState("bio")})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"email","data-cy":"email",placeholder:"Email",value:this.state.email,onChange:this.updateState("email")})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("input",{className:"form-control form-control-lg",type:"password","data-cy":"password",placeholder:"New Password",value:this.state.password,onChange:this.updateState("password")})),s.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:this.state.inProgress},"Update Settings")))}}]),t}(s.a.Component),ie=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"settings-page"},s.a.createElement("div",{className:"container page"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},s.a.createElement("h1",{className:"text-xs-center"},"Your Settings"),s.a.createElement(J,{errors:this.props.errors}),s.a.createElement(le,{currentUser:this.props.currentUser,onSubmitForm:this.props.onSubmitForm}),s.a.createElement("hr",null),s.a.createElement("button",{"data-cy":"logout",className:"btn btn-outline-danger",onClick:this.props.onClickLogout},"Or click here to logout.")))))}}]),t}(s.a.Component),ue=Object(c.b)(function(e){return Object(f.a)({},e.settings,{currentUser:e.common.currentUser})},function(e){return{onClickLogout:function(){return e({type:m.v})},onSubmitForm:function(t){return e({type:m.F,payload:u.a.Auth.save(t)})},onUnload:function(){return e({type:m.E})}}})(ie),me=function(e){function t(){return Object(C.a)(this,t),Object(w.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(U.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.redirectTo&&(O.dispatch(Object(E.b)(e.redirectTo)),this.props.onRedirect())}},{key:"componentWillMount",value:function(){var e=window.localStorage.getItem("jwt");e&&u.a.setToken(e),this.props.onLoad(e?u.a.Auth.current():null,e)}},{key:"render",value:function(){return this.props.appLoaded?s.a.createElement("div",null,s.a.createElement(S,{appName:this.props.appName,currentUser:this.props.currentUser}),s.a.createElement(j.a,null,s.a.createElement(k.a,{exact:!0,path:"/",component:K.a}),s.a.createElement(k.a,{path:"/login",component:X}),s.a.createElement(k.a,{path:"/register",component:se}),s.a.createElement(k.a,{path:"/editor/:slug",component:q}),s.a.createElement(k.a,{path:"/editor",component:q}),s.a.createElement(k.a,{path:"/article/:id",component:V}),s.a.createElement(k.a,{path:"/settings",component:ue}),s.a.createElement(k.a,{path:"/@:username/favorites",component:ce}),s.a.createElement(k.a,{path:"/@:username",component:ne}))):s.a.createElement("div",null,s.a.createElement(S,{appName:this.props.appName,currentUser:this.props.currentUser}))}}]),t}(s.a.Component),pe=Object(c.b)(function(e){return{appLoaded:e.common.appLoaded,appName:e.common.appName,currentUser:e.common.currentUser,redirectTo:e.common.redirectTo}},function(e){return{onLoad:function(t,a){return e({type:m.d,payload:t,token:a,skipTracking:!0})},onRedirect:function(){return e({type:m.A})}}})(me);window.Cypress&&(window.store=O,window.agent=u.a),r.a.render(s.a.createElement(c.a,{store:O},s.a.createElement(E.a,{history:y},s.a.createElement(j.a,null,s.a.createElement(k.a,{path:"/",component:pe})))),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f8ff95e9.chunk.js.map